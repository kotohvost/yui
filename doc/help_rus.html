<HEAD><TITLE>Текстовый редактор</TITLE></HEAD>
<BODY>

<i>Разделы помощи:</i>

<UL>
<LI><A HREF="#Help">О системе помощи</A>
<LI><A HREF="#Install">Установка и настройка</A>
<LI><A HREF="#Args">Аргументы</A>
<LI><A HREF="#Keyboard">Клавиатура</A>
<LI><A HREF="#Menu">Меню</A>
<LI><A HREF="#Windows">Операции с окнами</A>
<LI><A HREF="#Files">Операции с файлами</A>
<LI><A HREF="#Blocks">Операции с блоками</A>
<LI><A HREF="#Undo">Откат</A>
<LI><A HREF="#Find">Поиск</A>
<LI><A HREF="#Replace">Поиск с заменой</A>
<LI><A HREF="#Debug">Отладчик C/C++</A>
<LI><A HREF="#UserMenu">Меню пользователя</A>
<LI><A HREF="#Calculator">Калькулятор</A>
<LI><A HREF="#SystemCommand">Системная команда</A>
<LI><A HREF="#Regexpr">Регулярные выражения</A>
</UL>

<A NAME="Help"><H2>О системе помощи</H2></A>

Система помощи - контекстная. Тексты помощи написаны в синтаксисе <I>HTML</I>
и находятся в файле <I>yhelp.html</I>. При необходимости вы можете менять
текст по своему усмотрению. При наведении курсора на подсвеченный текст и
нажатии <I>Enter</I> будет вызвана соответствующая страница помощи.
<P>
Система помощи позволяет работать со страницами <i>man</i> и <i>GNU info</i>.
Для нормальной работы со страницами <i>man</i> необходима утилита <i>whatis</i>.
При ее отсутствии простеший вариант может выглядеть так:
<pre><i>
	#!/bin/sh
	echo "$1( )"
</i></pre>
Для работы со страницами <i>GNU info</i> в системе должна быть установлена
<i>GNU info</i>.

<A NAME=Install><H2>Установка и настройка</H2></A>
    Файлы, используемые во время работы редактора:
<pre>
  <i>y</i>          - собственно редактор
  <i>yhelp.html</i> - текст системы помощи в синтаксисе HTML
  <i>options</i>    - общие настройки
  <i>keymap</i>     - раскладка клавиатуры
  <i>colormap</i>   - настройка цветов
  <i>highlight</i>  - правила подсветки синтаксисов
  <i>highlight_html</i> - список тегов HTML с дополнительной информацией
</pre>
<p>
Синтаксис настроечных файлов описан непосредственно в этих файлах в виде
комментариев.
<p>
Исполняемый файл может находится в любом каталоге, указанном в переменной
окружения <i>PATH</i>. Остальные файлы стандартно находятся в каталоге
<I>/usr/local/lib/yui</I>. При необходимости можно переназначить их
местонахождение с помощью переменной окружения <I>YUI_PATH</I>.
Каталог <i>$HOME/.yui/</i> является служебным, может хранить личные настройки
редактора и кзш, образуемый при работе с Сетью.
Сохранение статуса производится в каталог <nobr><i>$HOME/.yui/status/</i></nobr>
в файл, имя которого содержит путь до текущего рабочего каталога.

<P>
Настройка на терминал может быть осуществлена по базам <i>termcap</i> или <i>terminfo</i>,
рабочая база задается в файле настроек <i>options</i>.
<p>
Вся настройка редактора осуществлятся при помощи редактирования соответствующих
файлов в каталоге <i>/usr/local/lib/yui/</i> или точно таких же файлов в
каталоге <i>$HOME/.yui/</i>
<p>
При отсутствии у терминала клавиши переключения на национальный алфавит
переключение можно осуществлять по <i>^J^N</i>.

<A NAME=Args><H2>Аргументы</H2></A>

Аргументы - это либо имена файлов, либо URL для Web-окон. Возможные ключи
перед аргументами:

<ul>
<dt><b>-r</b> - режим "только чтение"
<dt><b>-b</b> - режим "бинарный файл"
<dt><b>-M</b> - режим "отформатированная страница <i>man</i>"
<dt><b>-m</b> - вызов <i>man</i> на аргумент
<dt><b>-w</b> - аргумент является URL
</ul>

<i>Примеры</i>
<pre>
	./y main.c ../prog/list.h
	./y <b>-r</b> ../prog/list.h <b>-M</b> termcap.0 <b>-b</b> /bin/ls

	./y <b>-w</b> ftp://ftp.itk.ru
	./y <b>-w</b> http://www.itk.ru <b>-w</b> telnet://last.itk.ru
	./y <b>-w</b> man:termcap <b>-w</b> info:
	./y <b>-w</b> file:

	./y <b>-m</b> termcap
	./y <b>-m</b> "termcap(5)"
</pre>

<A NAME=Keyboard><H2>Клавиатура</H2></A>

Описание клавиш дано для раскладки клавиатуры <I>по умолчанию</I>.
Если клавиатура была перенастроена, рекомендуем изменить этот файл во
избежание путаницы с клавиатурой. Описания клавиш даны в верхнем регистре.
Если перед клавишей стоит знак <I>^</I>, это значит, что нажатие должно быть
совместно с клавишей <I>Ctrl</I>.
<P>
Любая операция может быть назначена на любую комбинацию клавиш. Клавиши <I>^J</I>,
<I>^K</I>, <I>^J^K</I> имеют специальный смысл -- одна и таже клавиша, нажатая
после них, будет генерировать разный код.
<P>
<TABLE BORDER=0>
<tr><td align=center colspan=2><h1>Общие команды и управление окнами</h1>
<tr><td><I>^J^R</I>			<td>обновить экран
<tr><td><I>^J^X</I>			<td>выход
<tr><td><I>^K^X</I>			<td>выход с ошибкой
<tr><td><I>Esc</I>, <I>^J Esc</I>, <I>^K Esc</I><td>меню
<tr><td><I>F1</I>			<td>помощь по контексту
<tr><td><I>^J F1</I>			<td>предыдущая помощь
<tr><td><I>^K F1</I>			<td>индекс помощи
<tr><td><I>^J 0</I> или <I>^J *</I>	<td>список окон
<tr><td><I>^E</I> или <I>^J^E</I>	<td>следующее окно
<tr><td><I>^W</I> или <I>^J^W</I>	<td>предыдущее окно
<tr><td><I>^C</I> или <I>^J^C</I>	<td>закрыть окно
<tr><td><I>^J^D</I>			<td>изменение размера окна
<tr><td><I>^J^A</I>			<td>изменение положения окна
<tr><td><I>^J^V</I>			<td>масштабирование окна
<tr><td><I>F3</I>			<td>открыть существующий файл
<tr><td><I>^J F3</I>			<td>открыть пустое окно
<tr><td><I>^\</I> или <I>^J .</I>	<td>системная команда
<tr><td><I>^J \</I> или <I>^K .</I>	<td>системная команда в терминальном окне
<tr><td><I>^_</I> или <I>^J /</I> или <I>^J F10</I><td>меню пользователя
<tr><td><I>^J F5</I>			<td>вызов man
<tr><td><I>^J F7</I>			<td>терминальное окно
<tr><td><I>^J F8</I>			<td>открыть отладчик
<tr><td><I>^J F9</I>			<td>открыть Web-окно
<tr><td align=center colspan=2><h1>Команды в окне ТЕКСТОВЫЙ РЕДАКТОР</h1>
<tr><td><I>F2</I>		<td>сохранить текст
<tr><td><I>^J F2</I>		<td>сохранить текст в новый файл
<tr><td><I>F4</I>		<td>переход на строку
<tr><td><I>^J F4</I>		<td>маркер строки для перехода
<tr><td><I>^G</I>		<td>совпадающий символ ниже курсора
<tr><td><I>^T</I>		<td>совпадающий символ выше курсора
<tr><td><I>F7</I>		<td>маркер строчного блока
<tr><td><I>F8</I>		<td>маркер колоночного блока
<tr><td><I>^P</I>		<td>снять маркер блока
<tr><td><I>F9</I>		<td>копирование блока
<tr><td><I>F10</I>		<td>перемещение блока
<tr><td><I>^J +</I>		<td>копирование блока в буфер обмена
<tr><td><I>^J Del</I>		<td>перемещение блока в буфер обмена
<tr><td><I>^J Ins</I>		<td>копирование блока из буфера обмена
<tr><td><I>^Y</I>		<td>удаление строки
<tr><td><I>^J^Y</I>		<td>удаление блока
<tr><td><I>^J^B</I>		<td>установить/снять точку останова
<tr><td><I>^J^L</I>		<td>ввод символа по коду
<tr><td><I>^K^V</I>		<td>режим просмотра пробелов и табуляций
<tr><td><I>^K^L</I>		<td>перезагрузить текст
<tr><td><I>^K^R</I>		<td>установить/снять режим "только чтение"
<tr><td><I>^U</I>		<td>откат
<tr><td><I>^R</I>		<td>обратный откат
<tr><td><I>F5</I>		<td>вызов man по текущему слову
<tr><td><I>F6</I>		<td>поиск
<tr><td><I>^L</I>		<td>продолжение поиска
<tr><td><I>^J F6</I>		<td>поиск с заменой
<tr><td align=center colspan=2><h1>Команды в окне Web-клиент</h1>
<tr><td><I>g</I>		<td>новый URL
<tr><td><I>/</I>		<td>информация о ссылке
<tr><td><I>s</I>		<td>поиск если страница допускает зто
<tr><td><I>r</I>		<td>перечитать страницу
<tr><td><I>i</I>		<td>прерывание запроса
<tr><td><I>d</I>		<td>скачать исходник страницы/ссылки
<tr><td><I>o</I>		<td>показать исходник страницы
<tr><td><I>-</I>		<td>предыдущая страница
<tr><td><I>m</I>		<td>главная страница
<tr><td><I>h</I>		<td>история
<tr><td><I>^A</I>		<td>следующий кадр
<tr><td><I>^X</I>		<td>предыдущий кадр
<tr><td><I>Tab</I> или <I>^J Down</I><td>на следующую ссылку
<tr><td><I>^J Up</I>		<td>на следующую ссылку
<tr><td><I>^J Home</I>		<td>к первой ссылке
<tr><td><I>^J End</I>		<td>к последней ссылке
<tr><td><I>^J PgUp</I>		<td>к началу текста
<tr><td><I>^J PgDn</I>		<td>к концу текста
<tr><td><I>F6</I>		<td>поиск по тексту
<tr><td><I>F7</I>		<td>выделение строчного блока
<tr><td><I>F8</I>		<td>выделение колоночного блока
<tr><td><I>^J +</I>		<td>вставка выделенного блока в буфер
<tr><td align=center colspan=2><h1>Команды в окне ТЕРМИНАЛ</h1>
<tr><td><I>^J Tab</I>		<td>мягкий/жесткий режим курсора
<tr><td><I>^K^F</I>		<td>режим получения ввода (первый/последний)
<tr><td><I>F7</I>		<td>маркер строчного блока
<tr><td><I>F8</I>		<td>маркер колоночного блока
<tr><td><I>^P</I>		<td>снять маркер блока
<tr><td><I>^J +</I>		<td>копирование блока в clipboard
<tr><td><I>^J Ins</I>		<td>копирование блока из clipboard
</TABLE>

<A NAME=Menu><H2>Меню</H2></A>

Меню содержит постоянную и переменную части. Постоянная присутствует всегда,
переменная зависит от текущего окна. Вызов меню осуществляется нажатием
<I>Esc</I> или <I>^J^_подсвеченная_буква_</I> в меню. Переключение между частями меню
по клавишам <I>Tab</I>, <I>^J_Tab</I>. Перемещение внутри меню - клавишами перемещения
курсора или нажатием подсвеченных букв.

<A NAME=Windows><H2>Операции с окнами</H2></A>

Имеется три типа окон: <I>редактор</I>, <I>терминал</I> и <I>Web-окно</I>. Одновременно может
быть открыто сколько угодно окон, во всех одновременно могут происходить
какие-либо действия. В терминальных окнах можно запускать любые команды,
а так же использовать их для вывода при отладке программ. Тип терминала в
этих окнах - pc3. <I>Web-окно</I> является средством просмотра гипертекста
(аналог <I>lynx</I>). Система помощи пользуется именно этим
окном. Если доступ к ресурсам Web должен быть через proxy-сервер, необходимо
определить переменную окружения <i>http_proxy</i>, включающую имя сервера
и номер порта:
<p>
Для <b>sh</b>
<p>
       $ http_proxy=http://last.itk.ru:3128/<br>
       $ export http_proxy
<p>
Для <b>csh</b>
<p>
       $ setenv http_proxy http://last.itk.ru:3128/
<P>
Над окнами можно производить операции по переключению, изменению размеров,
перемещению. Возможно перемещение окна за пределы экрана, в этом случае
все операции будут выполняться так же, но без визуального контроля.
<P>
При вызове объекта диалога <I>Список окон</I> можно увидеть список всех открытых
окон. Активное окно помечено выделенным цветом. Клавишей <I>Del</I> можно закрыть
любое окно, клавишей <I>Ins</I> можно выделить несколько окон и в последующем
переключения будут возможны только между ними. Клавишей <I>Enter</I> можно
активизировать любое окно.
<P>
Раскладку клавиатуры <I>по умолчанию</I> можно посмотреть <A HREF="#Keyboard">здесь</A>.

<A NAME=Files><H2>Операции с файлами</H2></A>

Редактор позволяет редактировать любые файлы. Если файл не текстовый,
он предоставляется к просмотру/редактированию в виде строк по 64 символа.
Символ с кодом меньше 32 помечен другим цветом и виден как символ <I>код+64</I>.
<P>
Выбор файла осуществляется с помощью объекта диалога. С его помощью можно
просмотреть содержимое любого каталога диска и выбрать нужный файл.
объект содержит информацию о текущем состоянии каталога, количестве файлов,
их суммарном размере, о текущем файле (размер, дата создания и т.д.).
<P>
При сохранениии текста в окне редактора текст сохраняется на диске под своим
именем. Если имени нет, выводится запрос на имя. Если в настройке редактора
отключено создание BAK-файлов, то старый вариант уничтожается. Если на диске
уже есть файл с таким именем, выдается предупреждение и запрос о последующих
действиях (переписать или прервать операцию записи).

<A NAME=Blocks><H2>Операции с блоками</H2></A>

Имеется два типа блоков -- строчный и колоночный. Пометка осуществляется
установкой двух маркеров (через меню или с клавиатуры). Текст, относящийся
к блоку, показывается выделенным цветом. Перемещение границ блока
осуществляется клавишами перемещения курсора при <I>одном</I> установленном маркере.
Установка второго маркера фиксирует границы блока. Блок можно
копировать, перемещать и удалять в текущем окне, копировать и перемещать в
другие окна с помощью буфера обмена, записывать на диск и считывать с диска.
<P>
При копировании строкового блока он вставится между строкой, на которой
стоит курсор и вышележащей строкой. Если отмечен прямоугольный блок, он
будет вставлен в строки, начиная от текущей и с позиции, на которой стоит
курсор.
<P>
Перемещение аналогично копированию, но на старом месте блок удаляется.
<P>
При копировании или перемещении в буфер, блок копирутся в буфер обмена,
в котором сохраняется и в том случае, если в тексте блок удален. Блок можно
добавлять в буфер, при этом старое содержимое буфера не теряется. Буфер
обмена можно редактировать.

<A NAME=Undo><H2>Откат</H2></A>

Эта операция позволяет восстанавливать те изменения, которые были внесены в
текст в текущем сеансе работы. Восстановление идет последовательно в обратном
порядке. Запоминаемое количество шагов определяется в настройке. Обратный
откат восстанавливает изменения, сделанные откатом. В настройке можно включить оптимизацию отката, при этом будет запоминаться
большее количество шагов за счет выполнения одинаковых операций за один шаг.

<A NAME=Find><H2>Поиск</H2></A>

Искомая строка и правила поиска задаются объектом диалога. Искомая строка
может быть <A HREF="#Regexpr">регулярным выражением</A>. В правилах задается
чувствительность к регистру букв, направлению поиска, месту поиска и т.д.
Возможен поиск во всех окнах типа <I>редактор</I>.

<A NAME=Replace><H2>Поиск с заменой</H2></A>

Строка для поиска, строка для замены, правила поиска и правила замены
определяются объектом диалога. Строка для поиска может быть <A HREF="#Regexpr">регулярным выражением</A>.
Строка для замены может содержать в себе условные обозначения искомых
регулярных выражений в виде <I>\n</I>, где <I>n</I> - номер выражения.
<P>
<I>Пример:</I>
<p>
Строка в тексте:   <I>У меня есть компьютер</I><br>
Строка для поиска: <I>(У.*ь) (к.*р)</I><br>
Строка для замены: <I>\1 хороший \2</I><br>
В результате получится: <I>У меня есть хороший компьютер</I>
<P>
В стоке состояния указывается количество произведенных замен. Поиск с
заменой возможен во всех окнах типа <I>редактор</I>.

<A NAME=Debug><H2>Отладчик C/C++</H2></A>

Более подробно - изучайте <A HREF="man:?gdb()">GNU debugger</A>.
<P>
Редактор позволяет запускать отладчик gdb в окне и использовать выходную
информацию gdb для отслеживания кода программы. После запуска необходимо
задать имя программы для выполнения/отладки и имя терминала, на котором
будет выполняться программа. Имя программы задается командой file, например:
<I>file _файл_</I>, при этом _файл_ должен быть скомпилирован с опцией <I>-g</I>.
<P>
Для задания терминала надо его открыть, посмотреть его имя командой <b>tty</b> и
запустить  на  нем  что-нибудь вроде <b>sleep 3000</b>, чтобы ничто не мешало
выполнению программы. Затем дайте команду <I>tty _имя_терминала_</I>,
например <I>tty /dev/ttyp5</I>. Теперь можно ставить точки останова и
запускать программу.
<P>
Есть возможность автоматической загрузки команд в <I>gdb</I>. Для этого надо
надо создать файл <nobr><i>.gdbinit</i></nobr>, описать в нем команды и установить
флажок автозагрузки в настройке отладчика (через меню).
<P>
			Некоторые команды gdb:
<p>
	<b>r</b>[un] ...................... запуск/рестарт программы<br>
	<b>c</b>[ontinue] ................. продолжение выполнения<br>
	<b>b</b>[reakpoint] имя_функции ... точка остнова на функцию<br>
	<b>b</b> имя_файла:номер_строки ... точка остнова на строку<br>
	<b>s</b>[tep] ..................... шаг программы<br>
	<b>n</b>[ext] ..................... шаг программы без захода в функции<br>
	<b>u</b>[ntil] имя_функции ........ выполнение до выхода из функции<br>
	<b>p</b>[rint] выражение .......... печать значения выражения<br>
	<b>q</b>[uit] ..................... выход из отладчика
<P>

<A NAME=UserMenu><H2>Меню пользователя</H2></A>

Эта функция позволяет пользователю быстро запускать программы, используемые
в повседневной работе. Основа меню пользователя - файл <I>yui.mnu</I>, имеющий
например такой вид:

<pre><b>
		yui: start
			/usr/local/bin/y
		yui: compile
			make 2>&1 | tee _r
			#reload _r
		yui: recompile
			make clean
			make 2>&1 | tee _r
			#reload _r
		syncing disks
			sync
		show processes
			ps aux
		>Demos Commander
			deco
</b></pre>
<p>
Строка, которая должна быть выведена в объект диалога, должна начинаться
от начала строки (не с табуляции или пробела). Строки, начинающиеся с
табуляции или пробела, являются системными командами или директивами
редактора, которые будут исполнены при выборе соответствующей строки.
Директива <b>#reload file</b>  перезагружает <b>file</b> в окно редактора.
Если файл был ранее в одном из окон, то файл будет прочитан заново в это
же окно. Если файла не было ни в одном из окон, то будет открыто новое окно.
Если строка описания команды начинается с символа <b>></b>, то соответсвующие
команды будут исполнены в автоматически созданном окне, которое закроется
при завершении исполнения последней команды.
<p>
Поиск файла <b>yui.mnu</b> осуществляется сначала в текущем каталоге,
а при неудаче в стартовом каталоге пользователя. При отсутствии файла
выдается соответствующее предупреждение.

<A NAME=Calculator><H2>Калькулятор</H2></A>

Калькулятор  поддерживает  стандартные  операции  с числами с плавающей
точкой.  Работает  в двочной, восьмиричной, десятичной и шестнадцатиричной
системах исчисления, производит операции над датами.
<p><i>Регистры калькулятора:</i>
<p><I>X</I>(ввод), <I>Y</I>(результат), <I>M</I>(память)
<p><i>Математические операции:</i>
<pre>
	<I>+</I> - сложение,
	<I>-</I> - вычитание,
	<I>*</I> - умножение,
	<I>/</I> - деление,
	<I>^</I> - возведение в степень,
	<I>%</I> - остаток от деления
</pre>
<p><i>Битовые операции:</i>
<pre>
	<I>|</I> - побитовое ИЛИ,
	<I>!</I> - побитовое исключающее ИЛИ,
	<I>&amp;</I> - побитовое И,
	<I>~</I> - побитовое НЕ
</pre>

<p><i>Прочие операции:</i>
<p><I>F10</I> - переключатель между двоичной (BIN), восьмиричной (OCT),
десятичной (DEC) и шестнадцатиричной (HEX) системами исчисления.
<p><I>PgDn</I> - поместить значение из регистра X в регистр M.
<p><I>PgUp</I> - поместить значение из регистра M в регистр X.
<p><I>^Y</I> - очистить строку ввода.


<A NAME=SystemCommand><H2>Системная команда</H2></A>

При вводе команды в предложенную строку ввода и нажатии <I>Enter</I> будет исполнена
соответствующая команда. По окончании ее исполнения появится строка

<PRE>                    <I>Press any key to return to YUI ...</I></PRE>

и при нажатии любой клавиши произойдет возврат в редактор.

</BODY>

<A NAME=Regexpr><H2>Регулярные выражения</H2></A>

Регулярные выражения используются для задания множества символьных
строк. Элементы этого множества соответствуют регулярному
выражению. Регулярные выражения могут содержать следующие символы со
специальным смыслом: <I>^</I>, <I>$</I>, <I>.</I>, <I>*</I>, <I>[</I>, <I>]</I>, <I>\</I>, <I>?</I>, <I>+</I>. Символы, не являющися метасимволами, определяют сами
себя. При описании регулярных  выражений под символом подразумевается любой
символ, отличный от символа перевода строки.
<P>
Регулярные  выражения могут заключаться между двумя произвольными одинаковыми
символами - ограничителями регулярного выражения. Если в данном регулярном
выражении какой-либо символ используется в качестве ограничителя,
внутри  регулярного выражения он должен экранироваться предшествующим
символом <I>\</I>. Ниже перечислены регулярные выражения, включающие метасимволы, и
соответствующие им строки символов:
<PRE>  <I>.</I></PRE>
Один произвольный символ.
<PRE>  <I>\c</I></PRE>
Символ c, где c - произвольный символ, кроме цифры и скобок.
<PRE>  <I>[...]</I></PRE>
Один символ из числа перечисленных в скобках. Пара символов в скобках,
разделенных символом <I>-</I>, означает символ из указанного диапазона. Если
символ <I>^</I> является первым из перечисленных в скобках, регулярному выражению
соответствует любой символ, не входящий в число перечисленных в скобках.
Внутри скобок символы <I>.</I>, <I>*</I>, <I>[</I> и <I>\</I> теряют свой специальный смысл.

<PRE>  <I>*</I></PRE>
Произвольное число (в том числе ноль) повторений регулярного выражения,
стоящего перед <I>*</I>.

<PRE>  <I>(RE)</I></PRE>
Регулярное выражение <I>RE</I>. Запись типа <I>\n</I>, где <I>n</I> - число, соответствует n-ой
части регулярного выражения, заключенного в <I>(</I> и <I>)</I>; отсчет частей слева
направо по символам <I>(</I> в пределах одного регулярного выражения. Символ <I>|</I>
обозначает операцию <I>или</I> для двух регулярных выражений.

<PRE>  <I>^</I></PRE>
Символ, обозначающий начало строки, если он стоит в начале регулярного
выражения.

<PRE>  <I>$</I></PRE>
Символ, обозначающий конец строки, если он стоит в конце регулярного
выражения.

<PRE>  <I>+</I></PRE>
Одно или более повторений регулярного выражения, стоящего перед <I>+</I>.

<PRE>  <I>?</I></PRE>
Одно или ни одного повторения регулярного выражения, стоящего перед <I>?</I>.
<P>
Конкатенация регулярных выражений означат максимальную по длине
последовательность символов, определяемых первым выражением, за которой
следует последовательность символов, определяемых вторым выражением.

